{"remainingRequest":"C:\\Users\\感觉\\Desktop\\new-bee\\new-bee\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\感觉\\Desktop\\new-bee\\new-bee\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\感觉\\Desktop\\new-bee\\new-bee\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\感觉\\Desktop\\new-bee\\new-bee\\src\\views\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\感觉\\Desktop\\new-bee\\new-bee\\src\\views\\Login.vue","mtime":1610364440000},{"path":"C:\\Users\\感觉\\Desktop\\new-bee\\new-bee\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\感觉\\Desktop\\new-bee\\new-bee\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\感觉\\Desktop\\new-bee\\new-bee\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\感觉\\Desktop\\new-bee\\new-bee\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvXHU2MTFGXHU4OUM5L0Rlc2t0b3AvbmV3LWJlZS9uZXctYmVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvXHU2MTFGXHU4OUM5L0Rlc2t0b3AvbmV3LWJlZS9uZXctYmVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHNIZWFkZXIgZnJvbSAnQC9jb21wb25lbnRzL1NpbXBsZUhlYWRlcic7CmltcG9ydCB7IHJlYWN0aXZlLCB0b1JlZnMsIHJlZiB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB2dWVJbWdWZXJpZnkgZnJvbSAnQC9jb21wb25lbnRzL1Z1ZUltZ1ZlcmlmeSc7CmltcG9ydCB7IFRvYXN0IH0gZnJvbSAndmFudCc7CmltcG9ydCB7IHJlZ2lzdGVyLCBsb2dpbiB9IGZyb20gJ0Avc2VydmljZS91c2VyJzsKaW1wb3J0IG1kNSBmcm9tICdqcy1tZDUnOwppbXBvcnQgeyBzZXRMb2NhbCB9IGZyb20gJ0AvY29tbW9uL2pzL3V0aWxzJzsKaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAndnVlLXJvdXRlcic7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBzSGVhZGVyOiBzSGVhZGVyLAogICAgdnVlSW1nVmVyaWZ5OiB2dWVJbWdWZXJpZnkKICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICAgIHZhciB2ZXJpZnlSZWYgPSByZWYobnVsbCk7CiAgICB2YXIgc3RhdGUgPSByZWFjdGl2ZSh7CiAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICB2ZXJpZnk6ICcnLAogICAgICB0eXBlOiAnbG9naW4nLAogICAgICB1c2VybmFtZTE6ICcnLAogICAgICBwYXNzd29yZDE6ICcnLAogICAgICBpbWdDb2RlOiAnJwogICAgfSk7CgogICAgdmFyIHRvZ2dsZSA9IGZ1bmN0aW9uIHRvZ2dsZSh2KSB7CiAgICAgIGNvbnNvbGUubG9nKHYpOwogICAgICBzdGF0ZS50eXBlID0gdjsKICAgICAgc3RhdGUudmVyaWZ5ID0gJyc7CiAgICB9OyAvLyDnmbvlvZXms6jlhowKCgogICAgdmFyIG9uU3VibWl0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodmFsdWVzKSB7CiAgICAgICAgdmFyIF95aWVsZCRsb2dpbiwgZGF0YTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29uc29sZS5sb2codmVyaWZ5UmVmLnZhbHVlLmltZ0NvZGUpOyAvLyDpgJrov4dyZWYudmFsdWXlj6/ku6Xlj5bliLDnu4Tku7blhoVzZXR1cOWHveaVsOi/lOWbnueahOWAvAoKICAgICAgICAgICAgICAgIHN0YXRlLmltZ0NvZGUgPSB2ZXJpZnlSZWYudmFsdWUuaW1nQ29kZSB8fCAnJzsKCiAgICAgICAgICAgICAgICBpZiAoIShzdGF0ZS52ZXJpZnkudG9Mb3dlckNhc2UoKSAhPT0gc3RhdGUuaW1nQ29kZS50b0xvd2VyQ2FzZSgpKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgVG9hc3QuZmFpbCgn6aqM6K+B56CB5pyJ6K+vJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgaWYgKCEoc3RhdGUudHlwZSA9PSAnbG9naW4nKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2luKHsKICAgICAgICAgICAgICAgICAgJ2xvZ2luTmFtZSc6IHZhbHVlcy51c2VybmFtZSwKICAgICAgICAgICAgICAgICAgJ3Bhc3N3b3JkTWQ1JzogbWQ1KHZhbHVlcy5wYXNzd29yZCkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfeWllbGQkbG9naW4gPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRsb2dpbi5kYXRhOwogICAgICAgICAgICAgICAgLy8gdG9rZW7vvIhkYXRh77yJ5L+d5a2Y5Zyo5pys5ZywCiAgICAgICAgICAgICAgICBzZXRMb2NhbCgndG9rZW4nLCBkYXRhKTsKICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKCcvaG9tZScpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICAvLyDms6jlhowKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbHVlcyk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVnaXN0ZXIoewogICAgICAgICAgICAgICAgICAibG9naW5OYW1lIjogdmFsdWVzLnVzZXJuYW1lMSwKICAgICAgICAgICAgICAgICAgInBhc3N3b3JkIjogdmFsdWVzLnBhc3N3b3JkMQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICBUb2FzdC5zdWNjZXNzKCfms6jlhozmiJDlip8nKTsKICAgICAgICAgICAgICAgIHN0YXRlLnR5cGUgPSAnbG9naW4nOwogICAgICAgICAgICAgICAgc3RhdGUudmVyaWZ5ID0gJyc7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIG9uU3VibWl0KF94KSB7CiAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0b1JlZnMoc3RhdGUpKSwge30sIHsKICAgICAgdmVyaWZ5UmVmOiB2ZXJpZnlSZWYsCiAgICAgIHRvZ2dsZTogdG9nZ2xlLAogICAgICBvblN1Ym1pdDogb25TdWJtaXQKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["C:\\Users\\感觉\\Desktop\\new-bee\\new-bee\\src\\views\\Login.vue"],"names":[],"mappings":";;;AA4EA,OAAO,OAAP,MAAoB,2BAApB;AACA,SAAS,QAAT,EAAmB,MAAnB,EAA2B,GAA3B,QAAsC,KAAtC;AACA,OAAO,YAAP,MAAyB,2BAAzB;AACA,SAAS,KAAT,QAAsB,MAAtB;AACA,SAAS,QAAT,EAAmB,KAAnB,QAAgC,gBAAhC;AACA,OAAO,GAAP,MAAgB,QAAhB;AACA,SAAS,QAAT,QAAyB,mBAAzB;AACA,SAAS,SAAT,QAA0B,YAA1B;AACA,eAAe;AACb,EAAA,UAAU,EAAE;AACV,IAAA,OAAO,EAAP,OADU;AAEV,IAAA,YAAW,EAAX;AAFU,GADC;AAKb,EAAA,KALa,mBAKL;AACN,QAAM,MAAK,GAAI,SAAS,EAAxB;AACA,QAAM,SAAQ,GAAI,GAAG,CAAC,IAAD,CAArB;AACA,QAAM,KAAI,GAAI,QAAQ,CAAC;AACrB,MAAA,QAAQ,EAAE,EADW;AAErB,MAAA,QAAQ,EAAE,EAFW;AAGrB,MAAA,MAAM,EAAE,EAHa;AAIrB,MAAA,IAAI,EAAE,OAJe;AAKrB,MAAA,SAAS,EAAE,EALU;AAMrB,MAAA,SAAS,EAAE,EANU;AAOrB,MAAA,OAAO,EAAE;AAPY,KAAD,CAAtB;;AAUA,QAAM,MAAK,GAAI,SAAT,MAAS,CAAC,CAAD,EAAO;AACpB,MAAA,OAAO,CAAC,GAAR,CAAY,CAAZ;AACA,MAAA,KAAK,CAAC,IAAN,GAAa,CAAb;AACA,MAAA,KAAK,CAAC,MAAN,GAAe,EAAf;AACF,KAJA,CAbM,CAkBN;;;AACA,QAAM,QAAO;AAAA,yEAAI,iBAAM,MAAN;AAAA;;AAAA;AAAA;AAAA;AAAA;AACf,gBAAA,OAAO,CAAC,GAAR,CAAY,SAAS,CAAC,KAAV,CAAgB,OAA5B,EADe,CACuB;;AACtC,gBAAA,KAAK,CAAC,OAAN,GAAgB,SAAS,CAAC,KAAV,CAAgB,OAAhB,IAA2B,EAA3C;;AAFe,sBAGX,KAAK,CAAC,MAAN,CAAa,WAAb,OAA+B,KAAK,CAAC,OAAN,CAAc,WAAd,EAHpB;AAAA;AAAA;AAAA;;AAIb,gBAAA,KAAK,CAAC,IAAN,CAAW,OAAX;AAJa;;AAAA;AAAA,sBAOX,KAAK,CAAC,IAAN,IAAc,OAPH;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAQU,KAAK,CAAC;AAC3B,+BAAa,MAAM,CAAC,QADO;AAE3B,iCAAe,GAAG,CAAC,MAAM,CAAC,QAAR;AAFS,iBAAD,CARf;;AAAA;AAAA;AAQL,gBAAA,IARK,gBAQL,IARK;AAYb;AACA,gBAAA,QAAQ,CAAC,OAAD,EAAU,IAAV,CAAR;AACA,gBAAA,MAAM,CAAC,IAAP,CAAY,OAAZ;AAda;AAAA;;AAAA;AAeN;AACP,gBAAA,OAAO,CAAC,GAAR,CAAY,MAAZ;AAhBa;AAAA,uBAiBP,QAAQ,CAAC;AACb,+BAAa,MAAM,CAAC,SADP;AAEb,8BAAY,MAAM,CAAC;AAFN,iBAAD,CAjBD;;AAAA;AAqBb,gBAAA,KAAK,CAAC,OAAN,CAAc,MAAd;AACA,gBAAA,KAAK,CAAC,IAAN,GAAa,OAAb;AACA,gBAAA,KAAK,CAAC,MAAN,GAAe,EAAf;;AAvBa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAP,QAAO;AAAA;AAAA;AAAA,OAAb;;AA2BA,2CACK,MAAM,CAAC,KAAD,CADX;AAEE,MAAA,SAAS,EAAT,SAFF;AAGE,MAAA,MAAM,EAAN,MAHF;AAIE,MAAA,QAAO,EAAP;AAJF;AAMF;AAzDa,CAAf","sourcesContent":["<template>\n  <div class=\"login\">\n    <!-- 头部 -->\n    <s-header :name=\"type == 'login' ? '登录' : '注册'\"></s-header>\n    <img class=\"logo\" src=\"//s.yezgea02.com/1604045825972/newbee-mall-vue3-app-logo.png\" alt=\"\">\n    <!-- 登录 -->\n    <div v-if=\"type == 'login'\" class=\"login-body login\">\n      <van-form @submit=\"onSubmit\">\n        <van-field\n          v-model=\"username\"\n          name=\"username\"\n          label=\"用户名\"\n          placeholder=\"用户名\"\n          :rules=\"[{ required: true, message: '请填写用户名' }]\"\n        />\n        <van-field\n          v-model=\"password\"\n          type=\"password\"\n          name=\"password\"\n          label=\"密码\"\n          placeholder=\"密码\"\n          :rules=\"[{ required: true, message: '请填写密码' }]\"\n        />\n        <van-field\n          v-model=\"verify\"\n          name=\"验证码\"\n          label=\"验证码\"\n          placeholder=\"输入验证码\"\n        >\n          <template #button>\n            <vue-img-verify ref=\"verifyRef\"/>\n          </template>\n        </van-field>\n        <div style=\"margin: 16px;\">\n          <div class=\"link-register\" @click=\"toggle('register')\">立即注册</div>\n          <van-button round block color=\"#1baeae\" type=\"info\" native-type=\"submit\">登录</van-button>\n        </div>\n      </van-form>\n    </div>\n    <!-- 注册 -->\n    <div v-else class=\"login-body register\">\n      <van-form @submit=\"onSubmit\">\n        <van-field\n          v-model=\"username1\"\n          name=\"username1\"\n          label=\"用户名\"\n          placeholder=\"用户名\"\n          :rules=\"[{ required: true, message: '请填写用户名' }]\"\n        />\n        <van-field\n          v-model=\"password1\"\n          type=\"password\"\n          name=\"password1\"\n          label=\"密码\"\n          placeholder=\"密码\"\n          :rules=\"[{ required: true, message: '请填写密码' }]\"\n        />\n        <van-field\n          v-model=\"verify\"\n          label=\"验证码\"\n          placeholder=\"输入验证码\"\n        >\n          <template #button>\n            <vue-img-verify ref=\"verifyRef\"/>\n          </template>\n        </van-field>\n        <div style=\"margin: 16px;\">\n          <div class=\"link-login\" @click=\"toggle('login')\">已有登录账号</div>\n          <van-button round block color=\"#1baeae\" type=\"info\" native-type=\"submit\">注册</van-button>\n        </div>\n      </van-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport sHeader from '@/components/SimpleHeader'\nimport { reactive, toRefs, ref } from 'vue'\nimport vueImgVerify from '@/components/VueImgVerify'\nimport { Toast } from 'vant'\nimport { register, login } from '@/service/user'\nimport md5 from 'js-md5'\nimport { setLocal } from '@/common/js/utils'\nimport { useRouter } from 'vue-router'\nexport default {\n  components: {\n    sHeader,\n    vueImgVerify\n  },\n  setup() {\n    const router = useRouter()\n    const verifyRef = ref(null)\n    const state = reactive({\n      username: '',\n      password: '',\n      verify: '',\n      type: 'login',\n      username1: '',\n      password1: '',\n      imgCode: ''\n    })\n\n    const toggle = (v) => {\n      console.log(v);\n      state.type = v\n      state.verify = ''\n    }\n    // 登录注册\n    const onSubmit = async(values) => {\n      console.log(verifyRef.value.imgCode); // 通过ref.value可以取到组件内setup函数返回的值\n      state.imgCode = verifyRef.value.imgCode || ''\n      if (state.verify.toLowerCase() !== state.imgCode.toLowerCase()) {\n        Toast.fail('验证码有误');\n        return\n      }\n      if (state.type == 'login') { // 登录\n        const { data } = await login({\n          'loginName': values.username,\n          'passwordMd5': md5(values.password)\n        })\n        // token（data）保存在本地\n        setLocal('token', data)\n        router.push('/home')\n      } else { // 注册\n        console.log(values);\n        await register({\n          \"loginName\": values.username1,\n          \"password\": values.password1\n        })\n        Toast.success('注册成功')\n        state.type = 'login'\n        state.verify = ''\n      }\n    }\n\n    return {\n      ...toRefs(state),\n      verifyRef,\n      toggle,\n      onSubmit\n    }\n  }\n}\n</script>\n\n<style lang=\"less\">\n  .login {\n    .logo {\n      width: 120px;\n      height: 120px;\n      display: block;\n      margin: 80px auto 20px;\n    }\n    .login-body {\n      padding: 0 20px;\n    }\n    .login {\n      .link-register {\n        font-size: 14px;\n        margin-bottom: 20px;\n        color: #1989fa;\n        display: inline-block;\n      }\n    }\n    .register {\n      .link-login {\n        font-size: 14px;\n        margin-bottom: 20px;\n        color: #1989fa;\n        display: inline-block;\n      }\n    }\n    .verify-bar-area {\n      margin-top: 24px;\n      .verify-left-bar {\n        border-color: #1baeae;\n      }\n      .verify-move-block {\n        background-color: #1baeae;\n        color: #fff;\n      }\n    }\n    .verify {\n      >div {\n        width: 100%;\n      }\n      display: flex;\n      justify-content: center;\n      .cerify-code-panel {\n        margin-top: 16px;\n      }\n      .verify-code {\n        width: 40%!important;\n        float: left!important;\n      }\n      .verify-code-area {\n        float: left!important;\n        width: 54%!important;\n        margin-left: 14px!important;\n        .varify-input-code {\n          width: 90px;\n          height: 38px!important;\n          border: 1px solid #e9e9e9;\n          padding-left: 10px;\n          font-size: 16px;\n        }\n        .verify-change-area {\n          line-height: 44px;\n        }\n      }\n    }\n  }\n</style>"],"sourceRoot":""}]}